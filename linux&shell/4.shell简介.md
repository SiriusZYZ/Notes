# 4.1shell介绍

quick answer
> ==Shell 是什么？==
> 1. ==***一种***== 向人类用户或其他程序 ***提供操作系统内核服务的计算机程序***。
> 2. Shell 同时也是一种脚本编程语言，***需要Shell解释器来执行***
> 3. 在CS中指为用户提供用户界面的软件，通常指CLI解析器，泛指所有为用户提供操作界面的程序
>> In [computing](https://en.wikipedia.org/wiki/Computing), a **shell** is a computer program that exposes an [operating system](https://en.wikipedia.org/wiki/Operating_system "Operating system")'s services to a human user or other programs. [Wikipedia](https://en.wikipedia.org/wiki/Shell_(computing))

> ==Shell的作用==
> 作为用户-内核 之间的沟通桥梁 (因为内核不提供交互功能)。
> **主要功能：**
> 1. 把用户的键入的命令解释给操作系统
> 2. 将操作系统输出的结果返回到用户交互界面
> ![](../assets/Pasted%20image%2020230824095531.png)

> ==常见的Shell解释器==
> Shell解释器
> 1. sh: UNIX上的标准shell，也是首个流行的Shell
> 2. csh: 语法类似C语言，因此被称为csh
> 3. tcsh: csh增强版，加入代码不全
> 4. bash: Linux的默认shell，向sh兼容
> 5. zsh: OS X的默认shell，向sh兼容


> ==Shell(软件)的分类==
> 1. 命令行形式(Command-Line Interface, CLI):
>    bash, sh, ksh, csh, zsh, cmd.exe, Windows PowerShell
> 2. 图形界面形式(Graphical User Interface, GUI)
>    Windows Explorer, Linux Shell, 程序管理器, etc.

> ==Shell(语言)的执行==
> Shell解释器会把命令对应到一系列已经编译好的二进制文件
> 1. Shell 编程：用户事先编写一个`.sh` 文件内含shell脚本，然后用shell程序执行该脚本。
> 2. 命令行形式：用户键入一句，shell程序执行一句


## 4.1.1查看当前系统的默认shell

- 使用环境变量`$SHELL`查看
```shell
echo $SHELL
```

# 4.2shell脚本及其语法

> ==Shell脚本==
> 一种为shell编写的脚本程序
> 可以包含多种条件，循环等逻辑控制语句
> 1. Windows中的为`.bat` 批处理脚本
> 2. Linux系统中为`.sh` 脚本文件


Shell脚本的注释使用 `#` 作为前导符号，每行井号后面的字符都是注释
## 4.2.1shell脚本的执行

>  ==shebang==: 声明解释器路径
>  shell脚本的首行一般以`#! {...}` 来开始，花括号中为声明的解释器。叫shebang是因为she=sharp#， bang=！
>  
>  ==shebang中常见的解释器==
>  1.  `#! /bin/sh` 使用sh作为解释器
>  2. `#! /usr/bin/python` 使用python作为解释器
>  3. `#! /usr/bin/env {Interpreter Name}` 通过调用env查找环境变量到对应`Interpreter` 执行，**适合在多个不同配置环境的服务器中使用** 

> ==why shebang==
> shebang主要作用是声明该脚本应该由何种解释器执行。当脚本文件作为可执行文件时。shebang能被系统识别并交由对应程序执行。
> **如果脚本未声明shebang，则使用默认shell解释器执行**

> ==shell脚本执行方式==
> 1. <作为脚本>   `source {Script Path} -Options` 使用默认解释器，即环境变量`$SHELL`中的解释器。可以使用缩写`. {Script Path} -Options`
> 2. <作为脚本>  `{Interpreter} {Script Path} -Options` 显式指定解释器
> 3. <作为可执行文件>`{Script Path} -Options` 使用shebang中指定的解释器，但是该脚本应该有执行权限


**case 1:**  在`hello_world.sh` 文件头声明使用bash作为shell解释器，并用前两种方式执行
```shell
siriuslalala$ cat hello_world.sh
#! /bin/bash
echo "Hello World"
siriuslalala$ source hello_world.sh  # 使用默认解释器执行，即系统默认shell
Hello World

siriuslalala$ . hello_world.sh  # 和上一行等效
Hello World

siriuslalala$ zsh hello_world.sh # 显式制定zsh来执行文件
Hello World
```

**case 2:**  将`hello_world.sh` 看作可执行文件执行
```shell
siriuslalala$ ./hello_world.sh
-bash: ./hello_world.sh: Permission denied
siriuslalala$ chmod +x hello_world.sh     # 不改执行权限执行不了
siriuslalala$ ./hello_world.sh
Hello World
```

**case 3:** 将`hello_world.py` 看作可执行文件执行，其中要求shebang中声明了使用env中的`python3`作为解释器运行
```shell
siriuslalala$ cat hello_world.py
#!/usr/bin/env python3
print("Hello World!")
siriuslalala$ ./hello_world.py
Hello World!
```

**case 4**: 作为可执行文件时的常见错误
```shell
# 1 没有执行权限
siriuslalala$ chmod -x hello_world.py
siriuslalala$ ./hello_world.py
-bash: ./hello_world.py: Permission denied

# 2 shebang指定了一个不存在的解释器
siriuslalala$ chmod +x hello_world.py
siriuslalala$ cat hello_world.py
#!/usr/bin/python4
print("Hello World!")
siriuslalala$ ./hello_world.py
-bash: ./hello_world.py: /usr/bin/python4: bad interpreter: No such file or directory

# 3 忘记加./
siriuslalala$ chmod +x hello_world.py
siriuslalala$ hello_world.py
zsh: command not found: hello_world.py
```

## 4.2.2脚本注释规范

祖