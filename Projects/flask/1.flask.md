# 1.1flask类

```python
from flask import Flask

# 当前文件
app = Flask(__name__)

@app.route("/")
def Main_Page():
    return "<h1> This is Main page.</h1>"

```
# 1.2route

## 1.2.1基本

```python
from flask import Flask
app = Flask(__name__)
#在进入/hello中时会执行Page_hellp

@app.route("/hello")
def Page_hello():
    return "<p> This is Hello.</p>"

if __name__ == "__main__":
    app.run(host = "0.0.0.0", port=80)
```
- `route` 将url映射到**视图函数**中，这称为**路由**
- 路由的语法规则是在视图函数前加装饰器，并在装饰器参数中添加url及其他参数。如
- `@app.route("url")` 是一个装饰器，所以后接的函数会在进入url中执行

- 也可以通过使用app的内置方法来替代装饰器
```python
app.add_url_rule(
			 rule,      # 即url匹配规则 
			 endpoint=None, 
			 view_func=None, 
			 provide_automatic_options=None, 
			 **options)
``` 

## 1.2.2|路由变量规则


- 有时候，url中有一些值无法被确定。或者每个url都写一个函数会比较麻烦
- 可以**设置一个url中变量提取的方法，将其传参给视图函数**
- 语法是:
```python
@app.route("/<type:Param>", )
def page(Param : type):
    do_something()
```
- 即在url中用 **`<>`** 来包住一个变量， 而关联的视图函数可以接受其作为变量
[Flask 路由参数详解](https://tedboy.github.io/flask/quickstart/quickstart4.html?highlight=rule#variable-rules)

| flask内置匹配格式 | 函数传参    | 备注                 |
| ----------------- | ----------- | -------------------- |
| `<int:p>`         | `p : int`   | 整型                 |
| `<float:p>`       | `p : float` | 正浮点数             |
| `<path:p>`        | `p : str`   | 路径,可以包含`/`     |
| `<string:p>`      | `p : str`   | 字符串,不可以包含`/` |
| `<uuid:p>`        | `p : str`   | uuid                 |
| `<any:p>`         | `p`         | 任何值                     |

```python
@app.route("/<int:id>")
def Page_hello(id : int):
    return "<p> This is {:}</p>".format(id)

@app.route("/<string:user>")
def Page_user(user : str):
    return "<p> you are {:}</p>".format(user)
```
- 
## 1.2.3|methods参数
```python
@app.route(url, methods = ["GET", "POST", ...])
```
- route路由接受url和方法列表，默认`[GET]`
- 如果尝试使用get一个仅POST的网页就会出问题: `Method Not Allowed` 返回状态码405
```Python
# 通过POST访问/hello时能调用 Page_hello()

@app.route("/hello", methods = ["POST"])
def Page_hello():
    return "<p> This is Hello.</p>"
```