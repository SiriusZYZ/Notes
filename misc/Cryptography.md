# basics

**定义**
- **明文 (Plain Text)** 是被加密的原始信息
- **密文 (Cipher Text)** 是加密后的信息，包含明文的所有信息，但只有在适当机制解密时才能读取
- **加密 (Encryption)** 是**将明文信息改变为难以读取的密文内容**，使之不可读的过程。加密本身并不能防止信息传输被截取，但**加密能防止截取者理解其内容**。
- **解密 (Decryption)** 是将密文内容恢复为其对应的明文信息的过程。
- **加密算法 (Cipher)** 是一种用于执行加密或解密的算法
- **密钥 (Cipher key)** 是加密算法中通常会用到的一个辅助信息，cipher会因key而发生过程变化，不同key使得同一个cipher加密同一个plain text时产生不同的cipher text。

**分类**
- 按照加密流程区分：
  1. **分组加密 (Block Cipher)**，或块加密。将明文分为多个等长模块，使用确定的算法和对称密钥对每组内容分别加密。
  2. **流加密 (Stream Cipher)**，加密和解密双方使用相同伪随机加密数据流（pseudo-random stream）作为密钥，明文数据每次与密钥数据流顺次对应加密，得到密文数据流。实践中数据通常是一个位（bit）并用异或（xor）操作加密。
- 按密钥性质区分:
  1. **对称加密 (Symmetric-key algorithm)**，算法的加密和解密过程使用相同的密钥，或可以相互推断的两个密钥。
  2. **非对称加密 (Asymmetric cryptography)**，算法需要两个密钥A，B。B加密的密文需要使用A密钥进行解密，A加密的密文需要使用B密钥进行解密。

**注意事项**
1. 不要尝试自己创造加密算法
2. 不要尝试自己实现已有的加密算法
3. 不要尝试自己修改已有的加密算法
# 摘要算法

**什么是摘要算法**
- 又称散列算法、哈希算法
- 是一种从任何一种数据中创建小的数字“指纹”的方法，将数据打乱混合，重新创建一个叫做**散列值**(hashes)的指纹

**摘要算法特征**
- 无论原文多长，计算出的哈希值长度固定
- 无需密钥 (通常)
- 不可逆 (因此摘要算法不是加密算法)
- 同一个明文同一个摘要算法计算得到的哈希值一致
- 不同明文得到的哈希值几乎不存在一致的情况，如果一致则被称为"碰撞”

**摘要算法应用**
1. 验证传输过程的数据完整性。即传输明文时附上明文的哈希值，在接收后用摘要算法重新计算以检验传输过程是否发生粗哦呜
2. 保护资料。比如不直接储存用户明文密码，而是储存其密码的哈希值。如果发生泄露也不会泄露明文密码。

**常见摘要算法的族群**:
1. **MD (Message Digest) 消息摘要算法**，包括MD2, MD4, MD5
2. **SHA (Secure Hash Algorithm) 安全散列算法**， 包括SHA-1，SHA-2算法的变种SHA-224, SHA-256, SHA-384, SHA-512
3. **MAC (Message Authentication Codes) 消息验证算法**，一种包含密钥的摘要算法，用于避免中间人攻击修改传输内容的哈希值，包括HMAC-SHA-1, HMAC-SHA256, HMAC-SHA512
## MD5
历史沿革
- MD5由MD2, MD3, MD4发展而来，MD2 的算法较慢但相对安全，MD4 速度很快，但安全性下降，MD5 比 MD4 更安全、速度更快。

散列值特点:
- 输入不定长度信息，产生128bits (16bytes，32Hexes) 的哈希值

**问题**
- MD5已被证明无法防止碰撞（collision），因此不适用于安全性认证，如 SSL 公开密钥认证或是数字签名等用途。
## SHA
- **SHA-1**: 最大输入长度$2^{64}-1$ bits，哈希值长度160bits。2010年后已经不被大多数加密场景接受，2017年实现了首个成功的SHA-1碰撞攻击。
- **SHA-2**: 包括SHA-224、SHA-256、SHA-384、SHA-512、SHA-512/224、SHA-512/256，目前没有明显弱点，但其计算原理与SHA-1一致。
  - SHA-256: 最大输入长度$2^{64}-1$ bits，哈希值长度256bits
  - SHA-512: 最大输入长度$2^{64}-1$ bits，哈希值长度256bits
- SHA-3: 2015年正式发布，由于对MD5出现成功的破解，以及对SHA-0和SHA-1出现理论上破解的方法，[NIST](https://zh.wikipedia.org/wiki/%E5%9C%8B%E5%AE%B6%E6%A8%99%E6%BA%96%E6%9A%A8%E6%8A%80%E8%A1%93%E7%A0%94%E7%A9%B6%E9%99%A2 "国家标准暨技术研究院")感觉需要一个与之前算法不同的，可替换的加密散列算法，也就是现在的SHA-3。
  - SHA3-256: 最大输入长度$\infty$ bits，哈希值长度256bits
  - SHA3-512: 最大输入长度$\infty$ bits，哈希值长度512bits

## 摘要算法总结

| 算法       | 最大输入长度 (bits) | 散列值长度 (bits) | 碰撞攻击安全性   |
| -------- | ------------- | ------------ | --------- |
| MD5      | 无限            | 128          | 不安全(2005) |
| SHA-1    | $2^{64}-1$    | 160          | 不安全(2017) |
| SHA-256  | $2^{64}-1$    | 256          | 安全        |
| SHA-512  | $2^{64}-1$    | 512          | 安全        |
| SHA3-256 | 无限            | 256          | 安全        |
| SHA3-512 | 无限            | 512          | 安全        |

# 常用对称加密算法

以下列出AES, DES, 3DES对称块加密算法，加解密过程可逆
- **DES** (Data Encryption Standard) 数据加密标准算法 (1977)
- **3DES/TDES** (Triple Data Encryption Algorithm) 三重数据加密标准算法 (1998)，通过增加DES密钥长度来加强安全性
- **AES** (Advanced Encryption Standard) 高级数据加密标准算法 (1998)，目前块对称加密的最主流算法。

|   算法    | 数据分组长度 <br>(bits) | 密钥长度 <br>(bits) | 单组密文长度 <br>(bits) |     安全性     |
| :-----: | :---------------: | :-------------: | :---------------: | :---------: |
|   DES   |        64         |       56        |        64         |     不安全     |
|  3DES   |        64         |      56\*3      |        64         | 安全, 但已被逐步替换 |
| AES-128 |        128        |       128       |        128        |     安全      |
| AES-192 |        128        |       192       |        128        |     安全      |
| AES-256 |        128        |       256       |        128        |     安全      |

# 常用非对称加密算法

以下列出了RSA, ECC两种最主流的非对称加密算法
- **RSA** 是发明者三人的姓氏首字母组合(1977) 。RSA密钥生成基于对素数的积，RSA密钥破解也必须基于大数的因数分解。当前大的因数分解非常困难，除了暴力破解没有很好的方法。如果因数分解领域有重大突破，RSA算法可能会不再安全。
  - 常见的密钥模值包括 1024(不安全), 2048(至少), 3072, 4096...
  - 详细推导见[RSA算法原理](https://zhuanlan.zhihu.com/p/48249182)
- **ECC** (Elliptic Curve Cryptography) 即椭圆曲线加密算法(1985)，利用椭圆曲线上的有理点构成Abel加法群上椭圆离散对数的计算困难性。公私密钥的计算系统包含ECDH, ECDSA等。优点是以较短的长度及更快的速度提供与RSA类似的安全性


# 总结

| 算法       | 安全性          | 算法类型    |
| -------- | ------------ | ------- |
| MD5      | 不安全(2005)    | 摘要算法    |
| SHA-1    | 不安全(2017)    | 摘要算法    |
| SHA-256  | 安全           | 摘要算法    |
| SHA-512  | 安全           | 摘要算法    |
| SHA3-256 | 安全           | 摘要算法    |
| SHA3-512 | 安全           | 摘要算法    |
| MD5      | 不安全(2005)    | 对称加密算法  |
| SHA-1    | 不安全(2017)    | 对称加密算法  |
| SHA-256  | 安全           | 对称加密算法  |
| SHA-512  | 安全           | 对称加密算法  |
| SHA3-256 | 安全           | 对称加密算法  |
| SHA3-512 | 安全           | 对称加密算法  |
| RSA      | 安全(模数大于1024) | 非对称加密算法 |
| ECC      | 安全(位数160)    | 非对称加密算法 |